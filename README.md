# Описание 

Бот телеграм канала *«Давай с нами, Петербург»*. Бот является гидом по поиску мероприятий и выставок на определённый день. Он анализирует базу данных и на написанную юзером комманду или дату отсылает список мероприятий с ссылками на полные посты с канала.

Бот также анализирует все посты на канале и если это событие или выставка, и их нет в базе данных, то вносит её.

Сохранение в базу данных происходят по принципу анализа по определённому шаблону. Бот воспринимает посты с канала начинающиеся с вида: "31 декабря", "29 - 31 августа Фестиваль", "28, 30 мая и 3 июня" Название следует сразу за датой с сохранением эмодзи.
Если употребляется конструкция "До 31 декабря", то событие сохраняется в базу данных выставок. 

При взаимодейтсвие с юзером возможно использование комманд ("Сегодня", "Завтра", "Выходные", "Мне повезёт" и "Выставки") или дату в любом удобном виде: "31 августа", "15/07", "14", "4.7" и другие. 
При этом если написать только число, то используется нынешний месяц если день ещё не прошёл и следующий месяц если день этого месяца уже прошёл. Например сегодня 15 августа, мы пишем "13", то нам выдаст посты на 13 сентября. А если напишем "17", то 17 августа.

## Запуск
1. cp sample.env .env
2. python run.py

## Структура

* run.py – основные взаимодействие с телеграмом
* analysis.py – набор функции с анализом постов и сообщений
* database.py – взаимодейтсвие с базой данных (postgresql)
* database/scheme.sql  – схема для базы данных и тригера





To-do:
1) ввести формат определения строки в виде: "31 мая - 4 июня"
2) переделать систему по сохранению, чтобы в базу данных сохранять формат даты (проблема с часовым поясом сервера при запросе пользователя!!)


